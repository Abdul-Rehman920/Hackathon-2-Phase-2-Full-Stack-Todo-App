# Data Model: Backend Setup with FastAPI, SQLModel, Neon PostgreSQL, and JWT Auth

## Task Entity

### Fields
- **id** (Integer, Primary Key, Auto-increment)
  - Unique identifier for each task
  - Auto-generated by the database
- **title** (String, Required)
  - Title or description of the task
  - Maximum length: 255 characters
- **description** (String, Optional)
  - Detailed description of the task
  - Maximum length: 1000 characters
  - Can be null
- **completed** (Boolean)
  - Status of the task (true if completed, false otherwise)
  - Default value: false
- **user_id** (String, Required)
  - Identifier of the user who owns the task
  - Used for data isolation between users
  - Indexed for performance
- **created_at** (DateTime)
  - Timestamp when the task was created
  - Auto-generated by the system
- **updated_at** (DateTime)
  - Timestamp when the task was last updated
  - Auto-updated by the system

### Relationships
- **User**: Each task belongs to a single user identified by user_id
  - This is a logical relationship enforced by the user_id field
  - No foreign key constraint is explicitly defined to avoid complexity with external auth system

### Validation Rules
- Title must not be empty (length > 0)
- Title must not exceed 255 characters
- Description, if provided, must not exceed 1000 characters
- user_id must be present and not empty
- completed field must be a boolean value

### Indexes
- **idx_user_id**: Index on user_id field for efficient filtering by user
- **idx_completed**: Index on completed field for efficient filtering by completion status
- **idx_user_id_completed**: Composite index on (user_id, completed) for efficient queries filtering by both fields

### State Transitions
- A task is created with completed = false by default
- A task can transition from completed = false to completed = true
- A task can transition from completed = true back to completed = false
- Once created, a task's user_id cannot be changed
- A task's title and description can be modified at any time

## JWT Token Structure

### Fields
- **sub** (String, Required)
  - Subject identifier (typically user_id)
- **exp** (Integer, Required)
  - Expiration timestamp (Unix timestamp)
- **iat** (Integer, Required)
  - Issued at timestamp (Unix timestamp)
- **jti** (String, Optional)
  - JWT ID for unique identification (optional for this implementation)

### Validation Rules
- Token must not be expired (exp > current time)
- Token must have been issued in the past (iat <= current time)
- Subject (sub) must match a valid user_id in the system